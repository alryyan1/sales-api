{
    "openapi": "3.0.0",
    "info": {
        "title": "Sales Management API",
        "description": "API documentation for Sales Management System. Use this API to interact with the sales system endpoints.",
        "contact": {
            "email": "support@example.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://alroomy.a.pinggy.link/sales-api/public",
            "description": "API Server"
        }
    ],
    "paths": {
        "/api/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "description": "Register a new user account and receive an authentication token",
                "operationId": "register",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "username",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "User's full name",
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "username": {
                                        "description": "Unique username",
                                        "type": "string",
                                        "example": "johndoe"
                                    },
                                    "password": {
                                        "description": "Password (min 8 characters)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "password_confirmation": {
                                        "description": "Password confirmation",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "User registered successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "User registered successfully."
                                        },
                                        "user": {
                                            "type": "object"
                                        },
                                        "access_token": {
                                            "type": "string",
                                            "example": "1|xxxxxxxxxxxx"
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "roles": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "permissions": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login user",
                "description": "Authenticate user with username and password, receive an authentication token",
                "operationId": "login",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "username",
                                    "password"
                                ],
                                "properties": {
                                    "username": {
                                        "description": "User's username",
                                        "type": "string",
                                        "example": "admin"
                                    },
                                    "password": {
                                        "description": "User's password",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logged in successfully."
                                        },
                                        "user": {
                                            "type": "object"
                                        },
                                        "access_token": {
                                            "type": "string",
                                            "example": "1|xxxxxxxxxxxx"
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "roles": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid credentials",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The provided credentials are incorrect."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/user": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get authenticated user",
                "description": "Get the currently authenticated user's information",
                "operationId": "getUser",
                "responses": {
                    "200": {
                        "description": "User information retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "name": {
                                            "type": "string",
                                            "example": "John Doe"
                                        },
                                        "username": {
                                            "type": "string",
                                            "example": "johndoe"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "roles": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout user",
                "description": "Revoke the current authentication token",
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logged out successfully."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/clients": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "List all clients",
                "description": "Get a paginated list of clients",
                "operationId": "getClients",
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Clients retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "current_page": {
                                            "type": "integer"
                                        },
                                        "per_page": {
                                            "type": "integer"
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Clients"
                ],
                "summary": "Create a new client",
                "description": "Create a new client record",
                "operationId": "createClient",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Client name",
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "email": {
                                        "description": "Client email (unique)",
                                        "type": "string",
                                        "format": "email",
                                        "example": "john@example.com",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "description": "Client phone number",
                                        "type": "string",
                                        "example": "+1234567890",
                                        "nullable": true
                                    },
                                    "address": {
                                        "description": "Client address",
                                        "type": "string",
                                        "example": "123 Main St",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Client created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "client": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/clients/{id}": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "Get a single client",
                "description": "Retrieve details of a specific client by ID",
                "operationId": "getClient",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Client ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Client retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "client": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Client not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Clients"
                ],
                "summary": "Update a client",
                "description": "Update existing client details",
                "operationId": "updateClient",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Client ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "John Doe Updated"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "john_updated@example.com",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+0987654321",
                                        "nullable": true
                                    },
                                    "address": {
                                        "type": "string",
                                        "example": "456 Other St",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Client updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "client": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Client not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Clients"
                ],
                "summary": "Delete a client",
                "description": "Remove a client record",
                "operationId": "deleteClient",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Client ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Client deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Client deleted successfully."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Client not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/clients/autocomplete": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "Client autocomplete",
                "description": "Get a list of clients for search/autocomplete",
                "operationId": "autocompleteClients",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search term (name or email)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Maximum number of results",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Clients retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "List all products",
                "description": "Get a paginated list of products with optional filtering, searching, and sorting",
                "operationId": "getProducts",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by name, SKU, scientific name, or description",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Filter by category ID",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "in_stock_only",
                        "in": "query",
                        "description": "Show only products with stock > 0",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "low_stock_only",
                        "in": "query",
                        "description": "Show only products with stock at or below alert level",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "out_of_stock_only",
                        "in": "query",
                        "description": "Show only products with stock <= 0",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Sort field (name, sku, stock_quantity, created_at, updated_at)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "created_at"
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "description": "Sort direction (asc, desc)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "desc"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Products retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "current_page": {
                                            "type": "integer"
                                        },
                                        "per_page": {
                                            "type": "integer"
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Create a new product",
                "description": "Create a new product in the system",
                "operationId": "createProduct",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "stock_quantity"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Product name",
                                        "type": "string",
                                        "example": "Product Name"
                                    },
                                    "scientific_name": {
                                        "description": "Scientific name",
                                        "type": "string",
                                        "example": "Scientific Name",
                                        "nullable": true
                                    },
                                    "sku": {
                                        "description": "Stock Keeping Unit (must be unique)",
                                        "type": "string",
                                        "example": "SKU123",
                                        "nullable": true
                                    },
                                    "description": {
                                        "description": "Product description",
                                        "type": "string",
                                        "example": "Product description",
                                        "nullable": true
                                    },
                                    "stock_quantity": {
                                        "description": "Initial stock quantity",
                                        "type": "integer",
                                        "example": 100
                                    },
                                    "stock_alert_level": {
                                        "description": "Stock alert level",
                                        "type": "integer",
                                        "example": 10,
                                        "nullable": true
                                    },
                                    "category_id": {
                                        "description": "Category ID",
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "stocking_unit_id": {
                                        "description": "Stocking unit ID",
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "sellable_unit_id": {
                                        "description": "Sellable unit ID",
                                        "type": "integer",
                                        "example": 2,
                                        "nullable": true
                                    },
                                    "units_per_stocking_unit": {
                                        "description": "Units per stocking unit",
                                        "type": "integer",
                                        "example": 10,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Product created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "product": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{id}": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Get a single product",
                "description": "Retrieve details of a specific product by ID",
                "operationId": "getProduct",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "product": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Products"
                ],
                "summary": "Update a product",
                "description": "Update an existing product. SKU cannot be changed after creation.",
                "operationId": "updateProduct",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Product name",
                                        "type": "string",
                                        "example": "Updated Product Name"
                                    },
                                    "scientific_name": {
                                        "type": "string",
                                        "example": "Updated Scientific Name",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Updated description",
                                        "nullable": true
                                    },
                                    "stock_alert_level": {
                                        "type": "integer",
                                        "example": 15,
                                        "nullable": true
                                    },
                                    "category_id": {
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "stocking_unit_id": {
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "sellable_unit_id": {
                                        "type": "integer",
                                        "example": 2,
                                        "nullable": true
                                    },
                                    "units_per_stocking_unit": {
                                        "type": "integer",
                                        "example": 10,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Product updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "product": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    },
                    "422": {
                        "description": "Validation error or SKU change attempt",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Products"
                ],
                "summary": "Delete a product",
                "description": "Delete a product. Cannot delete if product has associated purchases or sales.",
                "operationId": "deleteProduct",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Product deleted successfully."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    },
                    "409": {
                        "description": "Cannot delete product with associated records",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cannot delete product. It is associated with existing purchases or sales records."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/autocomplete": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Product autocomplete",
                "description": "Get a lightweight list of products for autocomplete/search dropdowns",
                "operationId": "autocompleteProducts",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search term (name, SKU, or scientific name)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Maximum number of results",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    },
                    {
                        "name": "show_all_for_empty_search",
                        "in": "query",
                        "description": "Show all products if search is empty",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Products retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/product/by-ids": {
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Get products by IDs",
                "description": "Fetch multiple products by their IDs. Useful for populating form selects/displays.",
                "operationId": "getProductsByIds",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "ids"
                                ],
                                "properties": {
                                    "ids": {
                                        "description": "Array of product IDs",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            1,
                                            2,
                                            3
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Products retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{id}/available-batches": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Get available batches for a product",
                "description": "Get all available batches (with remaining quantity > 0) for a specific product, ordered by expiry date (FIFO)",
                "operationId": "getAvailableBatches",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Batches retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "batch_number": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "remaining_quantity": {
                                                        "type": "integer"
                                                    },
                                                    "expiry_date": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "nullable": true
                                                    },
                                                    "sale_price": {
                                                        "type": "number",
                                                        "format": "float"
                                                    },
                                                    "unit_cost": {
                                                        "type": "number",
                                                        "format": "float"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/export/pdf": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Export products to PDF",
                "description": "Generate and download a PDF report of products with optional filters",
                "operationId": "exportProductsPdf",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search filter",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Category filter",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "in_stock_only",
                        "in": "query",
                        "description": "Show only in-stock products",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "low_stock_only",
                        "in": "query",
                        "description": "Show only low stock products",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "PDF file generated successfully",
                        "content": {
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/export/excel": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Export products to Excel",
                "description": "Generate and download an Excel file of products with optional filters",
                "operationId": "exportProductsExcel",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search filter",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Category filter",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "in_stock_only",
                        "in": "query",
                        "description": "Show only in-stock products",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "low_stock_only",
                        "in": "query",
                        "description": "Show only low stock products",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Excel file generated successfully",
                        "content": {
                            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/import": {
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Upload Excel file for import",
                "description": "Upload an Excel file to get column headers for mapping. First step in the import process.",
                "operationId": "importProductsExcel",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "description": "Excel file (xlsx, xls) - max 10MB",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "File uploaded successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "headers": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Excel file uploaded successfully. Please map the columns."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error reading file",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/preview-import": {
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Preview imported Excel data",
                "description": "Preview the imported Excel data with column mapping before processing. Second step in the import process.",
                "operationId": "previewProductsImport",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file",
                                    "columnMapping"
                                ],
                                "properties": {
                                    "file": {
                                        "description": "Excel file",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "columnMapping": {
                                        "description": "Column mapping object (e.g., {'A': 'name', 'B': 'sku'})",
                                        "type": "object"
                                    },
                                    "skipHeader": {
                                        "description": "Skip first row (header)",
                                        "type": "boolean",
                                        "default": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Preview generated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "preview": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error previewing import",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/process-import": {
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Process imported Excel data",
                "description": "Process and import products from Excel file with column mapping. Final step in the import process.",
                "operationId": "processProductsImport",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file",
                                    "columnMapping"
                                ],
                                "properties": {
                                    "file": {
                                        "description": "Excel file",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "columnMapping": {
                                        "description": "Column mapping object",
                                        "type": "object"
                                    },
                                    "skipHeader": {
                                        "description": "Skip first row (header)",
                                        "type": "boolean",
                                        "default": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Import completed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Import completed successfully. 10 products imported, 0 errors."
                                        },
                                        "imported": {
                                            "type": "integer",
                                            "example": 10
                                        },
                                        "errors": {
                                            "type": "integer",
                                            "example": 0
                                        },
                                        "errorDetails": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error processing import",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/purchases": {
            "get": {
                "tags": [
                    "Purchases"
                ],
                "summary": "List all purchases",
                "description": "Retrieve a paginated list of purchases with optional filters.",
                "operationId": "f9e4d207618ed5d420eacbf76284cb61",
                "parameters": [
                    {
                        "name": "supplier_id",
                        "in": "query",
                        "description": "Filter by Supplier ID",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "reference_number",
                        "in": "query",
                        "description": "Filter by Reference Number",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by Status (received, pending, ordered)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "received",
                                "pending",
                                "ordered"
                            ]
                        }
                    },
                    {
                        "name": "purchase_date",
                        "in": "query",
                        "description": "Filter by Purchase Date (Y-m-d)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "created_at",
                        "in": "query",
                        "description": "Filter by Creation Date (Y-m-d)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "Filter by Product ID present in purchase items",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "include_items",
                        "in": "query",
                        "description": "Include purchase items in the response",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Purchase"
                                            }
                                        },
                                        "links": {
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Purchases"
                ],
                "summary": "Create a new purchase",
                "description": "Store a newly created purchase in storage.",
                "operationId": "922a81d8425c9994dd7983b5e2606e13",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "supplier_id",
                                    "purchase_date",
                                    "status"
                                ],
                                "properties": {
                                    "supplier_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "warehouse_id": {
                                        "description": "Optional, defaults to 1",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "purchase_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2023-10-27"
                                    },
                                    "reference_number": {
                                        "type": "string",
                                        "example": "PO-2023-001"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "received",
                                            "pending",
                                            "ordered"
                                        ],
                                        "example": "received"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "example": "Urgent order"
                                    },
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "product_id",
                                                "quantity",
                                                "unit_cost",
                                                "sale_price"
                                            ],
                                            "properties": {
                                                "product_id": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "batch_number": {
                                                    "type": "string",
                                                    "example": "BATCH-001"
                                                },
                                                "quantity": {
                                                    "description": "Quantity in stocking units",
                                                    "type": "integer",
                                                    "example": 100
                                                },
                                                "unit_cost": {
                                                    "description": "Cost per stocking unit",
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 10.5
                                                },
                                                "sale_price": {
                                                    "description": "Sale price per sellable unit",
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 15
                                                },
                                                "sale_price_stocking_unit": {
                                                    "description": "Optional sale price per stocking unit",
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 150
                                                },
                                                "expiry_date": {
                                                    "type": "string",
                                                    "format": "date",
                                                    "example": "2024-10-27"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Purchase created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "purchase": {
                                            "$ref": "#/components/schemas/Purchase"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/purchases/{purchase}": {
            "get": {
                "tags": [
                    "Purchases"
                ],
                "summary": "Get purchase details",
                "description": "Display the specified purchase with items and supplier details.",
                "operationId": "5418fb51c2296e04e0c69b139a965237",
                "parameters": [
                    {
                        "name": "purchase",
                        "in": "path",
                        "description": "Purchase ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "purchase": {
                                            "$ref": "#/components/schemas/Purchase"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Purchase not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Purchases"
                ],
                "summary": "Update purchase details",
                "description": "Update the specified purchase. Note: Updating items is restricted here.",
                "operationId": "03b69a2006d1df821d4ddd67b19463f3",
                "parameters": [
                    {
                        "name": "purchase",
                        "in": "path",
                        "description": "Purchase ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reference_number": {
                                        "type": "string",
                                        "example": "PO-2023-001-UPD"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "received",
                                            "pending",
                                            "ordered"
                                        ]
                                    },
                                    "notes": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchase updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "purchase": {
                                            "$ref": "#/components/schemas/Purchase"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Purchases"
                ],
                "summary": "Delete a purchase",
                "description": "Remove the specified purchase from storage. CAUTION: Use with care.",
                "operationId": "5d705cc7993eefecb87769cdbaad1096",
                "parameters": [
                    {
                        "name": "purchase",
                        "in": "path",
                        "description": "Purchase ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "403": {
                        "description": "Deletion forbidden (default behavior)"
                    },
                    "200": {
                        "description": "Purchase deleted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales": {
            "get": {
                "tags": [
                    "Sales"
                ],
                "summary": "List all sales",
                "description": "Get a paginated list of sales with optional filtering.",
                "operationId": "getSales",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sales retrieved successfully"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Sales"
                ],
                "summary": "Create a new sale (Complete)",
                "description": "Create a new completed sale with items and payments in one request.",
                "operationId": "storeSale",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "sale_date",
                                    "items",
                                    "payments"
                                ],
                                "properties": {
                                    "client_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "sale_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "product_id": {
                                                    "type": "integer"
                                                },
                                                "quantity": {
                                                    "type": "integer"
                                                },
                                                "unit_price": {
                                                    "type": "number",
                                                    "format": "float"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "payments": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "method": {
                                                    "type": "string"
                                                },
                                                "amount": {
                                                    "type": "number",
                                                    "format": "float"
                                                },
                                                "payment_date": {
                                                    "type": "string",
                                                    "format": "date"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Sale created"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales/create-empty": {
            "post": {
                "tags": [
                    "Sales"
                ],
                "summary": "Create an empty sale (draft)",
                "description": "Creates a new sale record with no items, effectively a draft/cart for POS.",
                "operationId": "createEmptySale",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "client_id": {
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "sale_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2023-10-25"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Sale created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "sale": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales/{sale}/payments/single": {
            "post": {
                "tags": [
                    "Sales"
                ],
                "summary": "Add a payment",
                "description": "Add a single payment transaction to the sale.",
                "operationId": "addSinglePayment",
                "parameters": [
                    {
                        "name": "sale",
                        "in": "path",
                        "description": "Sale ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "method",
                                    "amount"
                                ],
                                "properties": {
                                    "method": {
                                        "type": "string",
                                        "enum": [
                                            "cash",
                                            "visa",
                                            "mastercard",
                                            "bank_transfer",
                                            "mada",
                                            "store_credit",
                                            "other",
                                            "refund"
                                        ]
                                    },
                                    "amount": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 100
                                    },
                                    "reference_number": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Payment added"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales/{sale}/discount": {
            "put": {
                "tags": [
                    "Sales"
                ],
                "summary": "Update sale discount",
                "description": "Update the discount amount and type for a sale. Recalculates totals.",
                "operationId": "updateSaleDiscount",
                "parameters": [
                    {
                        "name": "sale",
                        "in": "path",
                        "description": "Sale ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "discount_amount",
                                    "discount_type"
                                ],
                                "properties": {
                                    "discount_amount": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 10
                                    },
                                    "discount_type": {
                                        "type": "string",
                                        "enum": [
                                            "percentage",
                                            "fixed"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Discount updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "sale": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales/{sale}/payments/{payment}": {
            "delete": {
                "tags": [
                    "Sales"
                ],
                "summary": "Delete a payment",
                "description": "Delete a specific payment from a sale.",
                "operationId": "deleteSalePayment",
                "parameters": [
                    {
                        "name": "sale",
                        "in": "path",
                        "description": "Sale ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "payment",
                        "in": "path",
                        "description": "Payment ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment deleted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales/{sale}/items": {
            "post": {
                "tags": [
                    "Sales"
                ],
                "summary": "Add item to sale",
                "description": "Add a product item to an existing sale. Handles stock validation.",
                "operationId": "addSaleItem",
                "parameters": [
                    {
                        "name": "sale",
                        "in": "path",
                        "description": "Sale ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "product_id",
                                    "quantity",
                                    "unit_price"
                                ],
                                "properties": {
                                    "product_id": {
                                        "type": "integer",
                                        "example": 10
                                    },
                                    "quantity": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "unit_price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 50
                                    },
                                    "purchase_item_id": {
                                        "description": "Optional specific batch ID",
                                        "type": "integer",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Item added",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "sale": {
                                            "type": "object"
                                        },
                                        "added_items": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/sales/{sale}/items/{saleItem}": {
            "put": {
                "tags": [
                    "Sales"
                ],
                "summary": "Update sale item quantity/price",
                "description": "Update the quantity or price of a sale item. Stock is adjusted automatically.",
                "operationId": "updateSaleItem",
                "parameters": [
                    {
                        "name": "sale",
                        "in": "path",
                        "description": "Sale ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "saleItem",
                        "in": "path",
                        "description": "Sale Item ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "quantity",
                                    "unit_price"
                                ],
                                "properties": {
                                    "quantity": {
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "unit_price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 50
                                    },
                                    "purchase_item_id": {
                                        "type": "integer",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Item updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "updated_item": {
                                            "type": "object"
                                        },
                                        "sale": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Sales"
                ],
                "summary": "Delete sale item",
                "description": "Remove an item from the sale and return stock to inventory.",
                "operationId": "deleteSaleItem",
                "parameters": [
                    {
                        "name": "sale",
                        "in": "path",
                        "description": "Sale ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "saleItem",
                        "in": "path",
                        "description": "Sale Item ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Item deleted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/shifts/current": {
            "get": {
                "tags": [
                    "Shifts"
                ],
                "summary": "Get current shift",
                "description": "Retrieve the current active shift for the authenticated user.",
                "operationId": "getCurrentShift",
                "responses": {
                    "200": {
                        "description": "Current shift details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "user_id": {
                                                    "type": "integer"
                                                },
                                                "opened_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "closed_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "is_open": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "204": {
                        "description": "No active shift found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/shifts/open": {
            "post": {
                "tags": [
                    "Shifts"
                ],
                "summary": "Open new shift",
                "description": "Open a new shift for the authenticated user if one isn't already open.",
                "operationId": "openShift",
                "responses": {
                    "201": {
                        "description": "Shift opened",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Shift already open"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/shifts/close": {
            "post": {
                "tags": [
                    "Shifts"
                ],
                "summary": "Close current shift",
                "description": "Close the currently active shift for the authenticated user.",
                "operationId": "closeShift",
                "responses": {
                    "200": {
                        "description": "Shift closed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "No open shift to close"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/stock-transfers": {
            "get": {
                "tags": [
                    "Stock Transfers"
                ],
                "summary": "List stock transfers",
                "operationId": "942905c0296853ee95e2c37a98732c9b",
                "parameters": [
                    {
                        "name": "from_warehouse_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "to_warehouse_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of transfers"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Stock Transfers"
                ],
                "summary": "Create stock transfer",
                "operationId": "f8a07716d8fefac411d9f74d7516dc3f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "from_warehouse_id",
                                    "to_warehouse_id",
                                    "product_id",
                                    "quantity",
                                    "transfer_date"
                                ],
                                "properties": {
                                    "from_warehouse_id": {
                                        "type": "integer"
                                    },
                                    "to_warehouse_id": {
                                        "type": "integer"
                                    },
                                    "product_id": {
                                        "type": "integer"
                                    },
                                    "quantity": {
                                        "type": "number"
                                    },
                                    "transfer_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "notes": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Transfer created"
                    },
                    "422": {
                        "description": "Validation Error or Insufficient Stock"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/suppliers": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "List all suppliers",
                "description": "Retrieve a paginated list of suppliers with optional search.",
                "operationId": "6207e57dd1dcd1d6e7125fe144607196",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by name, email, or contact person",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Supplier"
                                            }
                                        },
                                        "links": {
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Create a new supplier",
                "description": "Store a newly created supplier in storage.",
                "operationId": "dc5dc7ccb140cd5b81cab6f42b396691",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "ABC Supplies"
                                    },
                                    "contact_person": {
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "contact@abc.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "1234567890"
                                    },
                                    "address": {
                                        "type": "string",
                                        "example": "123 Main St"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Supplier created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "supplier": {
                                            "$ref": "#/components/schemas/Supplier"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/suppliers/{supplier}": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Get supplier details",
                "description": "Display the specified supplier.",
                "operationId": "6618a92d29f29f583bd6025e607161f4",
                "parameters": [
                    {
                        "name": "supplier",
                        "in": "path",
                        "description": "Supplier ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "supplier": {
                                            "$ref": "#/components/schemas/Supplier"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Supplier not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Update supplier details",
                "description": "Update the specified supplier in storage.",
                "operationId": "38983e8d987b175dc56c15f64191fbdc",
                "parameters": [
                    {
                        "name": "supplier",
                        "in": "path",
                        "description": "Supplier ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "ABC Supplies Updated"
                                    },
                                    "contact_person": {
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "phone": {
                                        "type": "string"
                                    },
                                    "address": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "supplier": {
                                            "$ref": "#/components/schemas/Supplier"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Delete a supplier",
                "description": "Remove the specified supplier from storage.",
                "operationId": "bf1fd345bb41f583930c12eb78c3bdd7",
                "parameters": [
                    {
                        "name": "supplier",
                        "in": "path",
                        "description": "Supplier ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Supplier deleted successfully"
                    },
                    "409": {
                        "description": "Conflict (e.g. existing purchases)"
                    },
                    "500": {
                        "description": "Server Error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Product": {
                "title": "Product",
                "description": "Product model",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 20
                    },
                    "name": {
                        "type": "string",
                        "example": "Tylenol"
                    },
                    "sku": {
                        "type": "string",
                        "example": "MED-001"
                    },
                    "stock_quantity": {
                        "type": "integer",
                        "example": 100
                    },
                    "description": {
                        "type": "string",
                        "example": "Pain reliever"
                    },
                    "price": {
                        "type": "number",
                        "format": "float",
                        "example": 12.5
                    }
                },
                "type": "object"
            },
            "Purchase": {
                "title": "Purchase",
                "description": "Purchase model",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "supplier_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "warehouse_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "purchase_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2023-10-27"
                    },
                    "reference_number": {
                        "type": "string",
                        "example": "PO-12345"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "received",
                            "pending",
                            "ordered"
                        ],
                        "example": "received"
                    },
                    "total_amount": {
                        "type": "number",
                        "format": "float",
                        "example": 150
                    },
                    "notes": {
                        "type": "string",
                        "example": "Notes here"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "supplier": {
                        "$ref": "#/components/schemas/Supplier"
                    },
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PurchaseItem"
                        }
                    }
                },
                "type": "object"
            },
            "PurchaseItem": {
                "title": "Purchase Item",
                "description": "Purchase Item model",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 10
                    },
                    "purchase_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "product_id": {
                        "type": "integer",
                        "example": 20
                    },
                    "batch_number": {
                        "type": "string",
                        "example": "BATCH-123"
                    },
                    "quantity": {
                        "description": "In stocking units",
                        "type": "integer",
                        "example": 50
                    },
                    "remaining_quantity": {
                        "description": "In sellable units",
                        "type": "integer",
                        "example": 500
                    },
                    "unit_cost": {
                        "type": "number",
                        "format": "float",
                        "example": 10
                    },
                    "total_cost": {
                        "type": "number",
                        "format": "float",
                        "example": 500
                    },
                    "sale_price": {
                        "type": "number",
                        "format": "float",
                        "example": 15
                    },
                    "sale_price_stocking_unit": {
                        "type": "number",
                        "format": "float",
                        "example": 150
                    },
                    "expiry_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-12-31"
                    },
                    "cost_per_sellable_unit": {
                        "type": "number",
                        "format": "float",
                        "example": 1
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "product": {
                        "$ref": "#/components/schemas/Product"
                    }
                },
                "type": "object"
            },
            "Supplier": {
                "title": "Supplier",
                "description": "Supplier model",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "ABC Supplies"
                    },
                    "contact_person": {
                        "type": "string",
                        "example": "John Doe"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "john@abc.com"
                    },
                    "phone": {
                        "type": "string",
                        "example": "123456789"
                    },
                    "address": {
                        "type": "string",
                        "example": "123 Street, City"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Enter your Bearer token in the format: Bearer {token}",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Authentication endpoints"
        },
        {
            "name": "Products",
            "description": "Product management endpoints"
        },
        {
            "name": "Sales",
            "description": "Sales management endpoints"
        },
        {
            "name": "Shifts",
            "description": "User shift management for POS"
        },
        {
            "name": "Clients",
            "description": "Clients"
        },
        {
            "name": "Purchases",
            "description": "Purchases"
        },
        {
            "name": "Stock Transfers",
            "description": "Stock Transfers"
        },
        {
            "name": "Suppliers",
            "description": "Suppliers"
        }
    ]
}